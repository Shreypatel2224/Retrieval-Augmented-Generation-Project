left and right subtrees of each node When they differ by more than 1 choose a rotation that will fix the imbalance Note that comparing the heights of the left and right subtrees would be quite expensive if you didnt already know what they were The solution to this problem is for each node to store its height ie the height of the subtree rooted there This can be cheaply updated after every insertion or removal as you unwind the recursion The rotation is chosen considering the two links along the path below the node where the imbalance is heading back down toward where you inserted a node If you were wondering where the names LL RR LR and RL come from this is the answer to that mystery If the two links are both to the left perform an LL rotation rooted where the imbalance is If the two links are both to the right perform an RR rotation rooted where the imbalance is If the first link is to the left and the second is to the right perform an LR rotation rooted where the imbalance is If the