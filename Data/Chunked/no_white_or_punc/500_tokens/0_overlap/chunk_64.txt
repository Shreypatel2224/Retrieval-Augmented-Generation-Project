amount WHERE accountid  senderid  Attempt to credit money to account 2 UPDATE accounts SET balance  balance  amount WHERE accountid  receiverid  Check if there are sufficient funds in account 1 IF SELECT balance FROM accounts WHERE accountid  senderid  0 THEN  Roll back the transaction if there are insufficient funds ROLLBACK SIGNAL SQLSTATE 45000 SET MESSAGETEXT  rollbackmessage ELSE  Log the transactions if there are sufficient funds INSERT INTO transactions accountid amount transactiontype