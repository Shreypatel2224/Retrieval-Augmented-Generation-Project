SIGNAL SQLSTATE 45000 SET MESSAGETEXT  rollbackmessage ELSE  Log the transactions if there are sufficient funds INSERT INTO transactions accountid amount transactiontype VALUES senderid amount WITHDRAWAL INSERT INTO transactions accountid amount transactiontype VALUES receiverid amount DEPOSIT  Commit the transaction COMMIT SELECT commitmessage AS Result END IF END  DELIMITER  Limitations of Relational Databases  Schemas may evolve over time  Not all apps need the full strength of ACID